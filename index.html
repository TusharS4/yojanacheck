<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
<script async='async' src='https://www.googletagmanager.com/gtag/js?id=G-XGPZ22M8F2'/>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag(&#39;js&#39;, new Date());

  gtag(&#39;config&#39;, &#39;G-XGPZ22M8F2&#39;);
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YojanaCheck – Government Scheme Eligibility Tool 2025</title>
    <meta name="description" content="Find your eligible Indian government schemes like PMAY, Ayushman Bharat, Ujjwala Yojana, and more with YojanaCheck. Free eligibility tool for 2025.">
    <meta property="og:title" content="YojanaCheck – India’s Free Scheme Eligibility Tool (2025)">
    <meta property="og:description" content="Discover government schemes you're eligible for based on your profile. Includes PMAY, Ayushman Bharat, Ujjwala Yojana, E-Shram, and more.">
    <meta property="og:image" content="https://your-blog-url.com/yojanacheck-og-image.jpg"> <!-- Placeholder, replace with actual image URL -->
    <meta property="og:url" content="https://your-blog-url.com/yojanacheck">
    <meta property="og:type" content="website">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            /* Disable text selection */
            -webkit-user-select: none;  /* Safari */
            -moz-user-select: none;     /* Firefox */
            -ms-user-select: none;      /* IE 10+ */
            user-select: none;          /* Standard */
        }

        .widget-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
            position: relative;
        }

        /* Language Toggle */
        .language-toggle {
            position: absolute;
            top: 15px;
            right: 20px;
            z-index: 100;
            background: rgba(255,255,255,0.2);
            border-radius: 20px;
            padding: 5px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            color: white;
        }

        .language-toggle select {
            background: rgba(255,255,255,0.9);
            border: none;
            border-radius: 15px;
            padding: 5px 10px;
            font-size: 0.85rem;
            cursor: pointer;
            color: #333;
        }

        .header {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .form-container {
            padding: 40px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
            font-size: 1rem;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .check-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 20px;
        }

        .check-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .check-btn:active {
            transform: translateY(0);
        }

        .results-container {
            padding: 0 40px 40px;
            display: none;
        }

        .results-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .results-header h2 {
            color: #333;
            font-size: 1.8rem;
            margin-bottom: 10px;
        }

        /* Search Filter */
        .search-filter {
            margin-bottom: 25px;
            text-align: center;
        }

        .search-filter input {
            width: 100%;
            max-width: 400px;
            padding: 12px 15px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .search-filter input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .scheme-card {
            background: white;
            border: 1px solid #e1e8ed;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
        }

        .scheme-card.eligible {
            border-left: 5px solid #28a745; /* Green highlight */
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.2);
        }

        .scheme-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .scheme-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 10px;
        }

        .scheme-description {
            color: #666;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .eligibility-summary {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 15px;
            font-size: 0.9rem;
            color: #555;
        }

        .scheme-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .apply-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .apply-btn:hover {
            background: #218838;
            transform: translateY(-1px);
        }

        .pdf-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .pdf-btn:hover {
            background: #c82333;
            transform: translateY(-1px);
        }

        .whatsapp-btn {
            background: #25D366;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .whatsapp-btn:hover {
            background: #128C7E;
            transform: translateY(-1px);
        }

        .form-btn {
            background: #6f42c1;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .form-btn:hover {
            background: #5a2d91;
            transform: translateY(-1px);
        }

        /* PDF Download Section */
        .pdf-download-section {
            background: #f8f9fa;
            padding: 25px;
            margin: 30px 0;
            border-radius: 12px;
            text-align: center;
            border: 2px dashed #dee2e6;
        }

        .pdf-download-section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .pdf-download-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .download-pdf-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .download-pdf-btn:hover {
            background: #c82333;
            transform: translateY(-2px);
        }

        .whatsapp-share-btn {
            background: #25D366;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .whatsapp-share-btn:hover {
            background: #128C7E;
            transform: translateY(-2px);
        }

        .footer-info {
            background: #f8f9fa;
            padding: 20px 40px;
            text-align: center;
            color: #666;
            font-size: 0.9rem;
            position: relative;
        }

        .footer-watermark {
            position: absolute;
            bottom: 5px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.75rem;
            color: rgba(0,0,0,0.3);
            white-space: nowrap;
        }

        .email-capture {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 30px 40px;
            color: white;
            text-align: center;
        }

        .email-capture h3 {
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .email-form {
            display: flex;
            gap: 10px;
            max-width: 400px;
            margin: 0 auto;
        }

        .email-input {
            flex: 1;
            padding: 12px 15px;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
        }

        .email-submit {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .email-submit:hover {
            background: #ee5a24;
        }

        .no-results {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .no-results h3 {
            margin-bottom: 10px;
            color: #333;
        }

        .try-again-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .try-again-btn:hover {
            background: #0056b3;
        }

        /* Modal for Application Form */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: #000;
        }

        /* Iframe Optimization for Blogger */
        .widget-container {
            max-width: 100%;
            margin: 0;
            border-radius: 0;
            box-shadow: none;
        }

        /* When embedded in iframe, remove outer padding */
        body.iframe-mode {
            padding: 0;
            margin: 0;
            background: white;
        }

        body.iframe-mode .widget-container {
            border-radius: 0;
            box-shadow: none;
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            body {
                padding: 5px;
            }

            body.iframe-mode {
                padding: 0;
            }

            .language-toggle {
                top: 10px;
                right: 15px;
                font-size: 0.8rem;
            }

            .header h1 {
                font-size: 1.8rem;
                padding-right: 100px;
            }

            .header p {
                font-size: 1rem;
            }

            .form-container {
                padding: 30px 20px;
            }

            .form-row {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .results-container {
                padding: 0 20px 30px;
            }

            .scheme-actions {
                flex-direction: column;
            }

            .pdf-download-actions {
                flex-direction: column;
            }

            .email-form {
                flex-direction: column;
            }

            .email-capture {
                padding: 25px 20px;
            }

            .footer-info {
                padding: 20px;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 2px;
            }

            body.iframe-mode {
                padding: 0;
            }

            .header {
                padding: 15px;
            }

            .header h1 {
                font-size: 1.4rem;
                padding-right: 80px;
            }

            .form-container {
                padding: 15px 10px;
            }

            .scheme-card {
                padding: 15px;
            }

            .results-container {
                padding: 0 10px 20px;
            }

            .email-capture {
                padding: 20px 10px;
            }

            .footer-info {
                padding: 15px 10px;
            }
        }

        /* Blogger iframe specific optimizations */
        @media (max-width: 800px) {
            .widget-container {
                border-radius: 8px;
            }
        }

        /* Loading Animation */
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .hidden {
            display: none !important;
        }
    </style>
    <!-- Include jsPDF library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body oncontextmenu="return false;">
    <div class="widget-container">
        <!-- Language Toggle -->
        <div class="language-toggle">
            <span data-lang-key="language">🌐 Language:</span>
            <select id="languageSelect" onchange="changeLanguage()">
                <option value="en">English</option>
                <option value="hi">हिंदी</option>
            </select>
        </div>

        <!-- Header -->
        <div class="header">
            <h1 data-lang-key="title">YojanaCheck – Find Your Eligible Government Schemes in India (2025)</h1>
            <p data-lang-key="subtitle">Discover government schemes you're eligible for based on your profile</p>
        </div>

        <!-- Form -->
        <div class="form-container">
            <form id="eligibilityForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="age" data-lang-key="age">Age</label>
                        <input type="number" id="age" name="age" min="1" max="100" required>
                    </div>
                    <div class="form-group">
                        <label for="income" data-lang-key="income">Annual Household Income (₹)</label>
                        <input type="number" id="income" name="income" min="0" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="state" data-lang-key="state">State</label>
                        <select id="state" name="state" required>
                            <option value="" data-lang-key="select_state">Select your state</option>
                            <option value="AP">Andhra Pradesh</option>
                            <option value="AR">Arunachal Pradesh</option>
                            <option value="AS">Assam</option>
                            <option value="BR">Bihar</option>
                            <option value="CT">Chhattisgarh</option>
                            <option value="GA">Goa</option>
                            <option value="GJ">Gujarat</option>
                            <option value="HR">Haryana</option>
                            <option value="HP">Himachal Pradesh</option>
                            <option value="JH">Jharkhand</option>
                            <option value="KA">Karnataka</option>
                            <option value="KL">Kerala</option>
                            <option value="MP">Madhya Pradesh</option>
                            <option value="MH">Maharashtra</option>
                            <option value="MN">Manipur</option>
                            <option value="ML">Meghalaya</option>
                            <option value="MZ">Mizoram</option>
                            <option value="NL">Nagaland</option>
                            <option value="OR">Odisha</option>
                            <option value="PB">Punjab</option>
                            <option value="RJ">Rajasthan</option>
                            <option value="SK">Sikkim</option>
                            <option value="TN">Tamil Nadu</option>
                            <option value="TG">Telangana</option>
                            <option value="TR">Tripura</option>
                            <option value="UK">Uttarakhand</option>
                            <option value="UP">Uttar Pradesh</option>
                            <option value="WB">West Bengal</option>
                            <option value="AN">Andaman and Nicobar Islands</option>
                            <option value="CH">Chandigarh</option>
                            <option value="DN">Dadra and Nagar Haveli and Daman and Diu</option>
                            <option value="DL">Delhi</option>
                            <option value="JK">Jammu and Kashmir</option>
                            <option value="LD">Lakshadweep</option>
                            <option value="PY">Puducherry</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="caste" data-lang-key="caste_category">Caste Category</label>
                        <select id="caste" name="caste" required>
                            <option value="" data-lang-key="select_category">Select category</option>
                            <option value="GEN">General (GEN)</option>
                            <option value="OBC">Other Backward Classes (OBC)</option>
                            <option value="SC">Scheduled Castes (SC)</option>
                            <option value="ST">Scheduled Tribes (ST)</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="employment" data-lang-key="employment_type">Employment Type</label>
                        <select id="employment" name="employment" required>
                            <option value="" data-lang-key="select_employment_type">Select employment type</option>
                            <option value="Salaried">Salaried</option>
                            <option value="Farmer">Farmer</option>
                            <option value="Self-Employed">Self-Employed</option>
                            <option value="Unemployed">Unemployed</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="gender" data-lang-key="gender">Gender</label>
                        <select id="gender" name="gender" required>
                            <option value="" data-lang-key="select_gender">Select gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="disability" data-lang-key="disability_status">Disability Status</label>
                        <select id="disability" name="disability" required>
                            <option value="" data-lang-key="select_disability">Select</option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="location_type" data-lang-key="location_type">Location Type</label>
                        <select id="location_type" name="location_type" required>
                            <option value="" data-lang-key="select_location_type">Select location type</option>
                            <option value="Urban">Urban</option>
                            <option value="Rural">Rural</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="bpl_card" data-lang-key="bpl_card">BPL Card</label>
                        <select id="bpl_card" name="bpl_card" required>
                            <option value="" data-lang-key="select_bpl_card">Select</option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="marital_status" data-lang-key="marital_status">Marital Status</label>
                        <select id="marital_status" name="marital_status" required>
                            <option value="" data-lang-key="select_marital_status">Select marital status</option>
                            <option value="Single">Single</option>
                            <option value="Married">Married</option>
                            <option value="Widowed">Widowed</option>
                            <option value="Divorced">Divorced</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="education_level" data-lang-key="education_level">Education Level</label>
                        <select id="education_level" name="education_level" required>
                            <option value="" data-lang-key="select_education_level">Select education level</option>
                            <option value="Illiterate">Illiterate</option>
                            <option value="Primary">Primary (1-5)</option>
                            <option value="Middle">Middle (6-8)</option>
                            <option value="Secondary">Secondary (9-10)</option>
                            <option value="Higher Secondary">Higher Secondary (11-12)</option>
                            <option value="Graduate">Graduate</option>
                            <option value="Post Graduate">Post Graduate & Above</option>
                        </select>
                    </div>
                </div>
                <button type="submit" class="check-btn" data-lang-key="check_eligibility">Check My Eligibility</button>
            </form>
        </div>

        <!-- Results Section -->
        <div class="results-container" id="results">
            <div class="results-header">
                <h2 data-lang-key="your_eligible_schemes">Your Eligible Schemes</h2>
                <p data-lang-key="based_on_profile">Based on your profile, here are the government schemes you may be eligible for:</p>
            </div>

            <div class="search-filter">
                <input type="text" id="schemeSearch" placeholder="Search schemes by keyword (e.g., housing, health)" data-lang-key="search_schemes_placeholder">
            </div>

            <div id="schemeResults">
                <!-- Scheme cards will be dynamically inserted here -->
            </div>

            <div class="no-results" id="noResultsMessage" style="display: none;">
                <h3 data-lang-key="no_schemes_found_title">No Schemes Found</h3>
                <p data-lang-key="no_schemes_found_text">Unfortunately, no schemes match your current profile. Please try adjusting your criteria or check back later for new schemes.</p>
                <button class="try-again-btn" data-lang-key="try_again_button" onclick="resetForm()">Try Again</button>
            </div>

            <!-- PDF Download Section -->
            <div class="pdf-download-section">
                <h3 data-lang-key="download_report_title">📄 Download Your Scheme Report</h3>
                <div class="pdf-download-actions">
                    <button class="download-pdf-btn" data-lang-key="download_pdf_button" onclick="generatePdfReport()">Download PDF</button>
                    <button class="whatsapp-share-btn" data-lang-key="send_whatsapp_button" onclick="shareOnWhatsApp()">📱 Send to WhatsApp</button>
                </div>
            </div>
        </div>

        <!-- Email Capture -->
        <div class="email-capture">
            <h3 data-lang-key="email_updates_title">Get personalized scheme updates via email</h3>
            <div class="email-form">
                <input type="email" id="emailInput" class="email-input" placeholder="Enter your email address" data-lang-key="email_placeholder">
                <button type="button" class="email-submit" data-lang-key="subscribe_button" onclick="subscribeEmail()">Subscribe</button>
            </div>
        </div>

        <!-- Footer Info -->
        <div class="footer-info">
            <p data-lang-key="footer_text">This tool includes top schemes like PMAY, Ayushman Bharat, Ujjwala Yojana, E-Shram, and more.</p>
            <div class="footer-watermark">
                Built by YojanaCheck – India’s Free Scheme Eligibility Tool (2025)
            </div>
        </div>
    </div>

    <!-- Modal for Application Form -->
    <div id="applicationFormModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2 data-lang-key="application_form_title">Simulated Application Form</h2>
            <p data-lang-key="application_form_disclaimer">This is a simulated form for demonstration purposes only. Please refer to the official scheme website for actual application procedures.</p>
            <pre id="prefilledFormData"></pre>
            <button class="download-pdf-btn" data-lang-key="download_form_pdf" onclick="downloadFormPdf()">Download Form PDF</button>
        </div>
    </div>

    <script>
        // Disable right-click
        document.addEventListener('contextmenu', event => event.preventDefault());

        // Disable common dev tool shortcuts
        document.onkeydown = function(e) {
            if (e.keyCode == 123) { // F12
                return false;
            }
            if (e.ctrlKey && e.shiftKey && e.keyCode == 'I'.charCodeAt(0)) { // Ctrl+Shift+I
                return false;
            }
            if (e.ctrlKey && e.shiftKey && e.keyCode == 'J'.charCodeAt(0)) { // Ctrl+Shift+J
                return false;
            }
            if (e.ctrlKey && e.keyCode == 'U'.charCodeAt(0)) { // Ctrl+U
                return false;
            }
            if (e.ctrlKey && e.keyCode == 'S'.charCodeAt(0)) { // Ctrl+S
                return false;
            }
        };

        // Language data
        const translations = {
            en: {
                language: "🌐 Language:",
                title: "YojanaCheck – Find Your Eligible Government Schemes in India (2025)",
                subtitle: "Discover government schemes you're eligible for based on your profile",
                age: "Age",
                income: "Annual Household Income (₹)",
                state: "State",
                select_state: "Select your state",
                caste_category: "Caste Category",
                select_category: "Select category",
                employment_type: "Employment Type",
                select_employment_type: "Select employment type",
                gender: "Gender",
                select_gender: "Select gender",
                disability_status: "Disability Status",
                select_disability: "Select",
                location_type: "Location Type",
                select_location_type: "Select location type",
                bpl_card: "BPL Card",
                select_bpl_card: "Select",
                marital_status: "Marital Status",
                select_marital_status: "Select marital status",
                education_level: "Education Level",
                select_education_level: "Select education level",
                check_eligibility: "Check My Eligibility",
                your_eligible_schemes: "Your Eligible Schemes",
                based_on_profile: "Based on your profile, here are the government schemes you may be eligible for:",
                search_schemes_placeholder: "Search schemes by keyword (e.g., housing, health)",
                apply_now: "Apply Now",
                download_pdf_guide: "Download PDF Guide",
                generate_application_form: "Generate Application Form",
                download_report_title: "📄 Download Your Scheme Report",
                download_pdf_button: "Download PDF",
                send_whatsapp_button: "📱 Send to WhatsApp",
                email_updates_title: "Get personalized scheme updates via email",
                email_placeholder: "Enter your email address",
                subscribe_button: "Subscribe",
                no_schemes_found_title: "No Schemes Found",
                no_schemes_found_text: "Unfortunately, no schemes match your current profile. Please try adjusting your criteria or check back later for new schemes.",
                try_again_button: "Try Again",
                application_form_title: "Simulated Application Form",
                application_form_disclaimer: "This is a simulated form for demonstration purposes only. Please refer to the official scheme website for actual application procedures.",
                download_form_pdf: "Download Form PDF",
                footer_text: "This tool includes top schemes like PMAY, Ayushman Bharat, Ujjwala Yojana, E-Shram, and more.",
                income_category_ews: "EWS (Economically Weaker Section)",
                income_category_lig: "LIG (Low Income Group)",
                income_category_mig1: "MIG-I (Middle Income Group-I)",
                income_category_mig2: "MIG-II (Middle Income Group-II)",
                income_category_hig: "HIG (High Income Group)",
                income_category_general: "General Income Group"
            },
            hi: {
                language: "🌐 भाषा:",
                title: "योजनाचेक – भारत में आपकी पात्र सरकारी योजनाएं खोजें (2025)",
                subtitle: "अपनी प्रोफाइल के आधार पर सरकारी योजनाएं खोजें जिनके लिए आप पात्र हैं",
                age: "आयु",
                income: "वार्षिक पारिवारिक आय (₹)",
                state: "राज्य",
                select_state: "अपना राज्य चुनें",
                caste_category: "जाति श्रेणी",
                select_category: "श्रेणी चुनें",
                employment_type: "रोजगार प्रकार",
                select_employment_type: "रोजगार प्रकार चुनें",
                gender: "लिंग",
                select_gender: "लिंग चुनें",
                disability_status: "दिव्यांगता स्थिति",
                select_disability: "चुनें",
                location_type: "स्थान का प्रकार",
                select_location_type: "स्थान का प्रकार चुनें",
                bpl_card: "बीपीएल कार्ड",
                select_bpl_card: "चुनें",
                marital_status: "वैवाहिक स्थिति",
                select_marital_status: "वैवाहिक स्थिति चुनें",
                education_level: "शिक्षा का स्तर",
                select_education_level: "शिक्षा का स्तर चुनें",
                check_eligibility: "मेरी पात्रता जांचें",
                your_eligible_schemes: "आपकी पात्र योजनाएं",
                based_on_profile: "आपकी प्रोफाइल के आधार पर, यहां सरकारी योजनाएं हैं जिनके लिए आप पात्र हो सकते हैं:",
                search_schemes_placeholder: "योजनाओं को कीवर्ड द्वारा खोजें (जैसे: आवास, स्वास्थ्य)",
                apply_now: "अभी आवेदन करें",
                download_pdf_guide: "पीडीएफ गाइड डाउनलोड करें",
                generate_application_form: "आवेदन पत्र बनाएं",
                download_report_title: "📄 अपनी योजना रिपोर्ट डाउनलोड करें",
                download_pdf_button: "पीडीएफ डाउनलोड करें",
                send_whatsapp_button: "📱 व्हाट्सएप पर भेजें",
                email_updates_title: "ईमेल के माध्यम से व्यक्तिगत योजना अपडेट प्राप्त करें",
                email_placeholder: "अपना ईमेल पता दर्ज करें",
                subscribe_button: "सब्सक्राइब करें",
                no_schemes_found_title: "कोई योजना नहीं मिली",
                no_schemes_found_text: "दुर्भाग्य से, आपकी वर्तमान प्रोफाइल से कोई योजना मेल नहीं खाती। कृपया अपनी मानदंड समायोजित करने का प्रयास करें या नई योजनाओं के लिए बाद में देखें।",
                try_again_button: "पुनः प्रयास करें",
                application_form_title: "सिम्युलेटेड आवेदन पत्र",
                application_form_disclaimer: "यह केवल प्रदर्शन उद्देश्यों के लिए एक सिम्युलेटेड फॉर्म है। वास्तविक आवेदन प्रक्रियाओं के लिए कृपया आधिकारिक योजना वेबसाइट देखें।",
                download_form_pdf: "फॉर्म पीडीएफ डाउनलोड करें",
                footer_text: "इस टूल में पीएमएवाई, आयुष्मान भारत, उज्ज्वला योजना, ई-श्रम, और बहुत कुछ जैसी शीर्ष योजनाएं शामिल हैं।",
                income_category_ews: "ईडब्ल्यूएस (आर्थिक रूप से कमजोर वर्ग)",
                income_category_lig: "एलआईजी (निम्न आय वर्ग)",
                income_category_mig1: "एमआईजी-I (मध्यम आय वर्ग-I)",
                income_category_mig2: "एमआईजी-II (मध्यम आय वर्ग-II)",
                income_category_hig: "एचआईजी (उच्च आय वर्ग)",
                income_category_general: "सामान्य आय वर्ग"
            }
        };

        let currentLang = localStorage.getItem('yojanaCheckLanguage') || 'en';

        function changeLanguage() {
            const selectElement = document.getElementById('languageSelect');
            currentLang = selectElement.value;
            localStorage.setItem('yojanaCheckLanguage', currentLang);
            applyTranslations();
        }

        function applyTranslations() {
            document.querySelectorAll('[data-lang-key]').forEach(element => {
                const key = element.getAttribute('data-lang-key');
                if (translations[currentLang][key]) {
                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                        element.placeholder = translations[currentLang][key];
                    } else if (element.tagName === 'OPTION' && element.parentElement.id !== 'languageSelect') {
                        // For select options, only translate if it's not the language select itself
                        element.textContent = translations[currentLang][key];
                    } else {
                        element.textContent = translations[currentLang][key];
                    }
                }
            });
            // Special handling for select options that are not part of data-lang-key
            document.querySelector('#state option[value=""]').textContent = translations[currentLang].select_state;
            document.querySelector('#caste option[value=""]').textContent = translations[currentLang].select_category;
            document.querySelector('#employment option[value=""]').textContent = translations[currentLang].select_employment_type;
            document.querySelector('#gender option[value=""]').textContent = translations[currentLang].select_gender;
            document.querySelector('#disability option[value=""]').textContent = translations[currentLang].select_disability;
            document.querySelector('#location_type option[value=""]').textContent = translations[currentLang].select_location_type;
            document.querySelector('#bpl_card option[value=""]').textContent = translations[currentLang].select_bpl_card;
            document.querySelector('#marital_status option[value=""]').textContent = translations[currentLang].select_marital_status;
            document.querySelector('#education_level option[value=""]').textContent = translations[currentLang].select_education_level;

        }

        // Initialize language on load
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('languageSelect').value = currentLang;
            applyTranslations();
        });

        // Scheme data (simplified for demonstration)
        const schemes = [
            {
                id: 'PMAY',
                name: 'Pradhan Mantri Awas Yojana (PMAY)',
                description: 'Housing scheme providing subsidies for home purchase or construction for economically weaker sections and low/middle income groups.',
                eligibility: {
                    age: { min: 18 },
                    income: { EWS: 300000, LIG: 600000, MIG1: 1200000, MIG2: 1800000 }, // Annual income in INR
                    caste: ['GEN', 'OBC', 'SC', 'ST'],
                    employment: ['Salaried', 'Self-Employed'],
                    gender: ['Male', 'Female', 'Other'],
                    location_type: ['Urban'],
                    marital_status: ['Married'],
                },
                links: {
                    apply: 'https://pmaymis.gov.in/',
                    pdf: 'https://pmaymis.gov.in/Upload/pdf/PMAY(U)_Scheme_Guidelines.pdf'
                }
            },
            {
                id: 'AyushmanBharat',
                name: 'Ayushman Bharat (PM-JAY)',
                description: 'Health insurance scheme providing coverage up to ₹5 lakh per family per year for secondary and tertiary care.',
                eligibility: {
                    age: { min: 0 },
                    income: { EWS: 0, LIG: 0, MIG1: 0, MIG2: 0, HIG: 0 }, // No specific income limit, focuses on deprived rural families and identified occupational categories
                    caste: ['SC', 'ST', 'OBC', 'GEN'], // Covers all, but focuses on vulnerable
                    employment: ['Unemployed', 'Salaried', 'Farmer', 'Self-Employed'],
                    bpl_card: ['Yes'],
                    location_type: ['Rural', 'Urban']
                },
                links: {
                    apply: 'https://beneficiary.nha.gov.in/',
                    pdf: 'https://pmjay.gov.in/sites/default/files/2020-01/PMJAY_Operational_Guidelines_0.pdf'
                }
            },
            {
                id: 'UjjwalaYojana',
                name: 'Pradhan Mantri Ujjwala Yojana (PMUY)',
                description: 'A scheme to provide LPG connections to women from Below Poverty Line (BPL) households.',
                eligibility: {
                    age: { min: 18 },
                    income: { EWS: 0, LIG: 0, MIG1: 0, MIG2: 0, HIG: 0 }, // BPL households
                    caste: ['SC', 'ST', 'OBC', 'GEN'],
                    employment: ['Unemployed', 'Salaried', 'Farmer', 'Self-Employed'],
                    gender: ['Female'],
                    bpl_card: ['Yes']
                },
                links: {
                    apply: 'https://pmuy.gov.in/',
                    pdf: 'https://pmuy.gov.in/assets/pdf/PMUY-Scheme-Document.pdf'
                }
            },
            {
                id: 'E-Shram',
                name: 'E-Shram Portal Registration',
                description: 'National database for unorganized workers to provide social security benefits.',
                eligibility: {
                    age: { min: 16, max: 59 },
                    income: { EWS: 0, LIG: 0, MIG1: 0, MIG2: 0, HIG: 0 }, // Unorganized workers
                    employment: ['Unemployed', 'Self-Employed'],
                    education_level: ['Illiterate', 'Primary', 'Middle', 'Secondary', 'Higher Secondary', 'Graduate', 'Post Graduate']
                },
                links: {
                    apply: 'https://eshram.gov.in/',
                    pdf: 'https://eshram.gov.in/assets/pdf/e-SHRAM-FAQs.pdf'
                }
            },
            {
                id: 'PM-KISAN',
                name: 'Pradhan Mantri Kisan Samman Nidhi (PM-KISAN)',
                description: 'Income support scheme for all eligible farmer families across the country.',
                eligibility: {
                    age: { min: 18 },
                    income: { EWS: 0, LIG: 0, MIG1: 0, MIG2: 0, HIG: 0 }, // All eligible farmer families
                    employment: ['Farmer'],
                    location_type: ['Rural']
                },
                links: {
                    apply: 'https://pmkisan.gov.in/',
                    pdf: 'https://pmkisan.gov.in/Documents/PM-KISAN-Scheme-Guidelines.pdf'
                }
            },
            {
                id: 'AtalPensionYojana',
                name: 'Atal Pension Yojana (APY)',
                description: 'A pension scheme for workers in the unorganized sector.',
                eligibility: {
                    age: { min: 18, max: 40 },
                    income: { EWS: 0, LIG: 0, MIG1: 0, MIG2: 0, HIG: 0 }, // Not an income tax payer
                    employment: ['Salaried', 'Self-Employed', 'Unemployed'],
                },
                links: {
                    apply: 'https://www.npscra.nsdl.co.in/scheme-details.php',
                    pdf: 'https://www.npscra.nsdl.co.in/APY-Scheme-Booklet.pdf'
                }
            },
            {
                id: 'SukanyaSamriddhi',
                name: 'Sukanya Samriddhi Yojana (SSY)',
                description: 'A small deposit scheme for a girl child, launched as a part of the Beti Bachao Beti Padhao campaign.',
                eligibility: {
                    age: { max: 10 }, // Age of girl child
                    income: { EWS: 0, LIG: 0, MIG1: 0, MIG2: 0, HIG: 0 }, // No income criteria
                    gender: ['Female'],
                    marital_status: ['Single'] // Girl child must be unmarried
                },
                links: {
                    apply: 'https://www.nsiindia.gov.in/InternalPage.aspx?Id_Pk=89',
                    pdf: 'https://www.nsiindia.gov.in/InternalPage.aspx?Id_Pk=171'
                }
            },
            {
                id: 'MudraYojana',
                name: 'Pradhan Mantri MUDRA Yojana (PMMY)',
                description: 'Provides loans up to ₹10 lakh to non-corporate, non-farm small/micro enterprises.',
                eligibility: {
                    age: { min: 18 },
                    income: { EWS: 0, LIG: 0, MIG1: 0, MIG2: 0, HIG: 0 }, // Small/micro enterprises
                    employment: ['Self-Employed'],
                },
                links: {
                    apply: 'https://www.mudra.org.in/',
                    pdf: 'https://www.mudra.org.in/Mudra_Scheme_English.pdf'
                }
            }
        ];

        let currentUserData = {};
        let currentEligibleSchemes = [];

        function getIncomeCategory(income) {
            if (income <= 300000) return 'EWS';
            if (income <= 600000) return 'LIG';
            if (income <= 1200000) return 'MIG1';
            if (income <= 1800000) return 'MIG2';
            return 'HIG';
        }

        document.getElementById('eligibilityForm').addEventListener('submit', function(event) {
            event.preventDefault();

            const age = parseInt(document.getElementById('age').value);
            const income = parseInt(document.getElementById('income').value);
            const state = document.getElementById('state').value;
            const caste = document.getElementById('caste').value;
            const employment = document.getElementById('employment').value;
            const gender = document.getElementById('gender').value;
            const disability = document.getElementById('disability').value;
            const location_type = document.getElementById('location_type').value;
            const bpl_card = document.getElementById('bpl_card').value;
            const marital_status = document.getElementById('marital_status').value;
            const education_level = document.getElementById('education_level').value;

            currentUserData = {
                age,
                income,
                state,
                caste,
                employment,
                gender,
                disability,
                location_type,
                bpl_card,
                marital_status,
                education_level
            };

            currentEligibleSchemes = schemes.filter(scheme => {
                const el = scheme.eligibility;

                // Age check
                if (el.age && (age < el.age.min || (el.age.max && age > el.age.max))) {
                    return false;
                }

                // Income check (simplified for now, will refine with categories)
                // For now, if a scheme has income categories, assume it's income-based
                // and if user income falls into any of the scheme's target categories, it's eligible.
                // If scheme has no specific income categories, it's not filtered by income here.
                if (el.income) {
                    const userIncomeCategory = getIncomeCategory(income);
                    let incomeEligible = false;
                    for (const category in el.income) {
                        if (el.income[category] !== undefined) { // Check if category is defined for the scheme
                            if (category === userIncomeCategory) {
                                incomeEligible = true;
                                break;
                            }
                        }
                    }
                    // If scheme has income criteria but user's income category doesn't match any of the scheme's specified categories
                    // and the scheme is not for all income groups (i.e., el.income has specific categories defined),
                    // then it's not eligible based on income.
                    if (Object.keys(el.income).length > 0 && !incomeEligible && (el.income.EWS !== 0 || el.income.LIG !== 0 || el.income.MIG1 !== 0 || el.income.MIG2 !== 0 || el.income.HIG !== 0)) {
                        return false;
                    }
                }

                // Caste check
                if (el.caste && !el.caste.includes(caste)) {
                    return false;
                }

                // Employment check
                if (el.employment && !el.employment.includes(employment)) {
                    return false;
                }

                // Gender check
                if (el.gender && !el.gender.includes(gender)) {
                    return false;
                }

                // Disability check
                if (el.disability && !el.disability.includes(disability)) {
                    return false;
                }

                // Location type check
                if (el.location_type && !el.location_type.includes(location_type)) {
                    return false;
                }

                // BPL Card check
                if (el.bpl_card && !el.bpl_card.includes(bpl_card)) {
                    return false;
                }

                // Marital Status check
                if (el.marital_status && !el.marital_status.includes(marital_status)) {
                    return false;
                }

                // Education Level check
                if (el.education_level && !el.education_level.includes(education_level)) {
                    return false;
                }

                return true;
            });

            displayResults(currentEligibleSchemes);
            document.getElementById('results').style.display = 'block';
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        });

        function displayResults(filteredSchemes) {
            const schemeResultsDiv = document.getElementById('schemeResults');
            schemeResultsDiv.innerHTML = ''; // Clear previous results

            if (filteredSchemes.length === 0) {
                document.getElementById('noResultsMessage').style.display = 'block';
                return;
            }
            document.getElementById('noResultsMessage').style.display = 'none';

            filteredSchemes.forEach(scheme => {
                const schemeCard = document.createElement('div');
                schemeCard.classList.add('scheme-card', 'eligible');

                let incomeSummary = '';
                if (scheme.eligibility.income) {
                    const categories = Object.keys(scheme.eligibility.income).filter(key => scheme.eligibility.income[key] !== 0);
                    if (categories.length > 0) {
                        incomeSummary = categories.map(cat => translations[currentLang][`income_category_${cat.toLowerCase()}`]).join(', ');
                    } else {
                        incomeSummary = translations[currentLang].income_category_general;
                    }
                }

                schemeCard.innerHTML = `
                    <h3 class="scheme-title">${scheme.name}</h3>
                    <p class="scheme-description">${scheme.description}</p>
                    <div class="eligibility-summary">
                        <strong>Your Eligibility:</strong> 
                        Annual Household Income (₹): ${currentUserData.income} (${incomeSummary}), 
                        Age: ${currentUserData.age} years, 
                        Caste Category: ${currentUserData.caste}, 
                        Employment Type: ${currentUserData.employment},
                        Gender: ${currentUserData.gender},
                        Disability: ${currentUserData.disability},
                        Location: ${currentUserData.location_type},
                        BPL Card: ${currentUserData.bpl_card},
                        Marital Status: ${currentUserData.marital_status},
                        Education Level: ${currentUserData.education_level}
                    </div>
                    <div class="scheme-actions">
                        <a href="${scheme.links.apply}" target="_blank" class="apply-btn" data-lang-key="apply_now">Apply Now</a>
                        <a href="javascript:void(0)" onclick="generatePDFGuide(schemes.find(s => s.id === '${scheme.id}'))" class="pdf-btn" data-lang-key="download_pdf_guide">Download PDF Guide</a>
                        <button onclick="generateApplicationForm('${scheme.id}')" class="form-btn" data-lang-key="generate_application_form">Generate Application Form</button>
                    </div>
                `;
                schemeResultsDiv.appendChild(schemeCard);
            });
        }

        document.getElementById('schemeSearch').addEventListener('keyup', function() {
            const searchTerm = this.value.toLowerCase();
            const filtered = currentEligibleSchemes.filter(scheme => {
                return scheme.name.toLowerCase().includes(searchTerm) || scheme.description.toLowerCase().includes(searchTerm);
            });
            displayResults(filtered);
        });

        function subscribeEmail() {
            const emailInput = document.getElementById('emailInput');
            const email = emailInput.value;
            if (email) {
                let subscribedEmails = JSON.parse(localStorage.getItem('subscribedEmails')) || [];
                if (!subscribedEmails.includes(email)) {
                    subscribedEmails.push(email);
                    localStorage.setItem('subscribedEmails', JSON.stringify(subscribedEmails));
                    alert('Thank you for subscribing! Your email has been saved.');
                    emailInput.value = '';
                } else {
                    alert('This email is already subscribed.');
                }
            } else {
                alert('Please enter a valid email address.');
            }
        }

        function resetForm() {
            document.getElementById('eligibilityForm').reset();
            document.getElementById('results').style.display = 'none';
            document.getElementById('schemeResults').innerHTML = '';
            document.getElementById('noResultsMessage').style.display = 'none';
            document.getElementById('schemeSearch').value = '';
            currentUserData = {};
            currentEligibleSchemes = [];
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        // Generate PDF guide for scheme with Hindi/English support
        function generatePDFGuide(scheme) {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Get current language
            const isHindi = currentLang === 'hi';
            
            // Set font for Hindi support
            doc.setFont("helvetica", "normal");
            
            // Header
            doc.setFontSize(20);
            doc.setTextColor(40, 40, 40);
            const title = isHindi ? `${scheme.nameHi || scheme.name} - योजना गाइड` : `${scheme.name} - Scheme Guide`;
            doc.text(title, 20, 30);
            
            // Add government logo placeholder
            doc.setFontSize(12);
            doc.setTextColor(100, 100, 100);
            const govText = isHindi ? "भारत सरकार - आधिकारिक गाइड" : "Government of India - Official Guide";
            doc.text(govText, 20, 45);
            
            // Scheme details
            doc.setFontSize(16);
            doc.setTextColor(40, 40, 40);
            const aboutTitle = isHindi ? "योजना के बारे में:" : "About the Scheme:";
            doc.text(aboutTitle, 20, 65);
            
            doc.setFontSize(12);
            const description = isHindi ? (scheme.descriptionHi || scheme.description) : scheme.description;
            const splitDescription = doc.splitTextToSize(description, 170);
            doc.text(splitDescription, 20, 80);
            
            // Eligibility criteria
            let yPos = 80 + (splitDescription.length * 7) + 15;
            doc.setFontSize(16);
            const eligibilityTitle = isHindi ? "पात्रता मानदंड:" : "Eligibility Criteria:";
            doc.text(eligibilityTitle, 20, yPos);
            
            yPos += 15;
            doc.setFontSize(12);
            
            // Income criteria
            if (scheme.incomeRange) {
                const incomeText = isHindi ? 
                    `• वार्षिक आय: ₹${scheme.incomeRange.min.toLocaleString()} - ₹${scheme.incomeRange.max.toLocaleString()}` :
                    `• Annual Income: ₹${scheme.incomeRange.min.toLocaleString()} - ₹${scheme.incomeRange.max.toLocaleString()}`;
                doc.text(incomeText, 25, yPos);
                yPos += 10;
            }
            
            // Age criteria
            if (scheme.ageRange) {
                const ageText = isHindi ? 
                    `• आयु सीमा: ${scheme.ageRange.min} - ${scheme.ageRange.max} वर्ष` :
                    `• Age Range: ${scheme.ageRange.min} - ${scheme.ageRange.max} years`;
                doc.text(ageText, 25, yPos);
                yPos += 10;
            }
            
            // Application process
            yPos += 10;
            doc.setFontSize(16);
            const applicationTitle = isHindi ? "आवेदन प्रक्रिया:" : "Application Process:";
            doc.text(applicationTitle, 20, yPos);
            
            yPos += 15;
            doc.setFontSize(12);
            const steps = isHindi ? [
                "1. आधिकारिक वेबसाइट पर जाएं",
                "2. आवश्यक दस्तावेज तैयार करें",
                "3. ऑनलाइन आवेदन भरें",
                "4. दस्तावेज अपलोड करें",
                "5. आवेदन जमा करें और रसीद प्रिंट करें"
            ] : [
                "1. Visit the official website",
                "2. Prepare required documents",
                "3. Fill the online application",
                "4. Upload documents",
                "5. Submit application and print receipt"
            ];
            
            steps.forEach(step => {
                doc.text(step, 25, yPos);
                yPos += 8;
            });
            
            // Required documents
            yPos += 10;
            doc.setFontSize(16);
            const documentsTitle = isHindi ? "आवश्यक दस्तावेज:" : "Required Documents:";
            doc.text(documentsTitle, 20, yPos);
            
            yPos += 15;
            doc.setFontSize(12);
            const documents = isHindi ? [
                "• आधार कार्ड",
                "• आय प्रमाण पत्र",
                "• जाति प्रमाण पत्र (यदि लागू हो)",
                "• बैंक खाता विवरण",
                "• पासपोर्ट साइज़ फोटो",
                "• निवास प्रमाण पत्र"
            ] : [
                "• Aadhaar Card",
                "• Income Certificate",
                "• Caste Certificate (if applicable)",
                "• Bank Account Details",
                "• Passport Size Photos",
                "• Residence Certificate"
            ];
            
            documents.forEach(doc_item => {
                doc.text(doc_item, 25, yPos);
                yPos += 8;
            });
            
            // Contact information
            yPos += 15;
            doc.setFontSize(16);
            const contactTitle = isHindi ? "संपर्क जानकारी:" : "Contact Information:";
            doc.text(contactTitle, 20, yPos);
            
            yPos += 15;
            doc.setFontSize(12);
            const websiteText = isHindi ? `आधिकारिक वेबसाइट: ${scheme.detailsUrl || scheme.links.apply}` : `Official Website: ${scheme.detailsUrl || scheme.links.apply}`;
            doc.text(websiteText, 25, yPos);
            yPos += 10;
            
            const helplineText = isHindi ? "हेल्पलाइन: 1800-XXX-XXXX" : "Helpline: 1800-XXX-XXXX";
            doc.text(helplineText, 25, yPos);
            
            // Footer
            doc.setFontSize(10);
            doc.setTextColor(150, 150, 150);
            const footerText = isHindi ? 
                "यह गाइड YojanaCheck द्वारा तैयार किया गया है। कृपया नवीनतम जानकारी के लिए आधिकारिक वेबसाइट देखें।" :
                "This guide is prepared by YojanaCheck. Please visit official website for latest information.";
            const splitFooter = doc.splitTextToSize(footerText, 170);
            doc.text(splitFooter, 20, 280);
            
            // Save the PDF
            const fileName = isHindi ? 
                `${scheme.id}_योजना_गाइड.pdf` : 
                `${scheme.id}_Scheme_Guide.pdf`;
            doc.save(fileName);
        }

        // PDF Report Downloadion
        function generatePdfReport() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            doc.setFontSize(22);
            doc.text('YojanaCheck - Scheme Eligibility Report', 10, 20);

            doc.setFontSize(12);
            doc.text('Generated on: ' + new Date().toLocaleDateString(), 10, 30);

            let y = 40;
            doc.setFontSize(14);
            doc.text('Your Profile:', 10, y);
            y += 10;
            doc.setFontSize(12);
            for (const key in currentUserData) {
                doc.text(`${key.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase())}: ${currentUserData[key]}`, 10, y);
                y += 7;
            }

            y += 10;
            doc.setFontSize(14);
            doc.text('Eligible Schemes:', 10, y);
            y += 10;

            if (currentEligibleSchemes.length === 0) {
                doc.setFontSize(12);
                doc.text('No schemes found for your profile.', 10, y);
            } else {
                currentEligibleSchemes.forEach(scheme => {
                    doc.setFontSize(12);
                    doc.text(`- ${scheme.name}`, 10, y);
                    y += 7;
                    doc.setFontSize(10);
                    doc.text(scheme.description, 15, y, { maxWidth: 180 });
                    y += 10;
                    if (y > 280) { // Check for page overflow
                        doc.addPage();
                        y = 20; // Reset Y for new page
                    }
                });
            }

            doc.save('YojanaCheck_Report.pdf');
        }

        // WhatsApp Share
        function shareOnWhatsApp() {
            let schemesList = currentEligibleSchemes.map(s => s.name).join(', ');
            if (schemesList.length > 100) {
                schemesList = schemesList.substring(0, 97) + '...'; // Truncate if too long
            }
            const message = `Hi! I found I’m eligible for ${schemesList || 'several schemes'} using this free tool. Try it here: https://your-blog-url.com/yojanacheck`;
            const whatsappUrl = `https://api.whatsapp.com/send?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }

        // Application Form Generation
        let currentSchemeForForm = null;

        function generateApplicationForm(schemeId) {
            currentSchemeForForm = schemes.find(s => s.id === schemeId);
            if (!currentSchemeForForm) return;

            const prefilledFormData = document.getElementById('prefilledFormData');
            let formDataText = `--- Simulated Application Form for ${currentSchemeForForm.name} ---\n\n`;
            formDataText += `Disclaimer: This is a simulated form for demonstration purposes only. Please refer to the official scheme website for actual application procedures.\n\n`;
            formDataText += `User Details:\n`;
            for (const key in currentUserData) {
                formDataText += `- ${key.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase())}: ${currentUserData[key]}\n`;
            }
            formDataText += `\nScheme Details:\n`;
            formDataText += `- Scheme Name: ${currentSchemeForForm.name}\n`;
            formDataText += `- Description: ${currentSchemeForForm.description}\n`;
            formDataText += `- Official Link: ${currentSchemeForForm.links.apply}\n`;
            formDataText += `\n--- Application Fields (Simulated) ---\n\n`;
            formDataText += `1. Full Name: ____________________________________\n`;
            formDataText += `2. Date of Birth: ${currentUserData.age ? new Date().getFullYear() - currentUserData.age : '_______'}\n`;
            formDataText += `3. Address: ____________________________________\n`;
            formDataText += `4. Contact Number: ____________________________________\n`;
            formDataText += `5. Aadhar Number: ____________________________________\n`;
            formDataText += `6. Income Proof (e.g., Salary Slip/ITR): ${currentUserData.income ? 'Attached' : 'Not Attached'}\n`;
            formDataText += `7. Caste Certificate: ${currentUserData.caste !== 'GEN' ? 'Attached' : 'Not Applicable'}\n`;
            formDataText += `8. Bank Account Details: ____________________________________\n`;
            formDataText += `9. Declaration: I hereby declare that the information provided above is true and correct to the best of my knowledge.\n\n`;
            formDataText += `Signature: _________________________\n`;
            formDataText += `Date: ${new Date().toLocaleDateString()}\n`;

            prefilledFormData.textContent = formDataText;
            document.getElementById('applicationFormModal').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('applicationFormModal').style.display = 'none';
        }

        function downloadFormPdf() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            doc.setFontSize(18);
            doc.text(`Simulated Application Form for ${currentSchemeForForm.name}`, 10, 20);

            doc.setFontSize(10);
            doc.text('Disclaimer: This is a simulated form for demonstration purposes only. Please refer to the official scheme website for actual application procedures.', 10, 30, { maxWidth: 180 });

            let y = 45;
            doc.setFontSize(12);
            const lines = document.getElementById('prefilledFormData').textContent.split('\n');
            lines.forEach(line => {
                doc.text(line, 10, y);
                y += 7;
                if (y > 280) {
                    doc.addPage();
                    y = 20;
                }
            });

            doc.save(`${currentSchemeForForm.id}_Application_Form.pdf`);
        }

        // Detect if running in iframe and apply appropriate styling
        function detectIframeMode() {
            try {
                if (window.self !== window.top) {
                    document.body.classList.add('iframe-mode');
                    // Additional iframe optimizations
                    document.querySelector('.widget-container').style.maxWidth = '100%';
                    document.querySelector('.widget-container').style.margin = '0';
                    document.querySelector('.widget-container').style.borderRadius = '0';
                    document.querySelector('.widget-container').style.boxShadow = 'none';
                }
            } catch (e) {
                // If we can't access window.top, we're likely in an iframe
                document.body.classList.add('iframe-mode');
            }
        }

        // Initial language setup
        document.addEventListener('DOMContentLoaded', () => {
            detectIframeMode(); // Detect iframe mode first
            
            const savedLang = localStorage.getItem('yojanaCheckLanguage');
            if (savedLang) {
                document.getElementById('languageSelect').value = savedLang;
                currentLang = savedLang;
            }
            applyTranslations();
        });

        // Prevent inspect element and copy-paste
        document.addEventListener('keydown', function(e) {
            // Disable F12, Ctrl+Shift+I, Ctrl+Shift+J, Ctrl+U, Ctrl+S
            if (e.key === 'F12' || 
                (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'J')) || 
                (e.ctrlKey && e.key === 'u') || 
                (e.ctrlKey && e.key === 's')) {
                e.preventDefault();
            }
        });

        document.addEventListener('copy', function(e) {
            e.preventDefault();
            alert('Copying is disabled on this page.');
        });

        document.addEventListener('selectstart', function(e) {
            e.preventDefault();
        });

    </script>
</body>
</html>

